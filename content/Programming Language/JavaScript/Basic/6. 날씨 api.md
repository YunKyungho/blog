이용자의 위치에 따른 날씨를 나타내주는 기능을 만들어 볼 것이다.

우선 이용자의 위치를 파악할 수 있는 navigator를 이용할 것인데

![Untitled](images/JavaScript/Untitled%2029.png)

이런식으로 날씨를 불러오는 것을 성공했을 때의 함수와 에러가 발생했을 때의 함수를 넣어 getCurrentPosition 기능을 사용할 수 있다.

그리고 이 또한 Js에서 알아서 정보를 줄 것인데 그것을 성공 argument에서 받아 콘솔에 출력 해보면

![Untitled](images/JavaScript/Untitled%2030.png)

이렇게 다양한 정보를 포함한 객체가 주어진다. 여기서 우리가 필요한 것은 latitude(위도)와 longitude(경도)이기에

![Untitled](images/JavaScript/Untitled%2031.png)

이렇게 값을 가져와준다.

[Current weather data](https://openweathermap.org/current)

이 사이트에서 회원가입 하면 api키를 주는데 그 키를 이용하여 api call 쪽에 있는

![Untitled](images/JavaScript/Untitled%2032.png)

주소에 위도, 경도, api key 값을 넣어주고 검색해본다.

![Untitled](images/JavaScript/Untitled%2033.png)

그럼 이렇게 JSON이 나온다.

화씨가 아닌 도씨를 얻기 위해서 &units=metric을 url 뒤에 추가해주고 url 변수에 담는다.

이제 이 JSON을 가져 오기 위해 fetch 라는 것을 이용할 것이다.

![Untitled](images/JavaScript/Untitled%2034.png)

(위 문법을 모르겠다면 to do list 만들기를 보고 와야한다.)

fetch 역시 url 요청을 한 뒤 어떤 정보를 가져와주는데 그 중 json을 받아 어떠한 작업을 하기 위해 위와 같은 문법으로 작성을 하는 것이다. then은 그냥 뜻 그대로 then으로 받아들이면 될 것 같다.

<aside>
💡 url을 통해 요청을 해서 정보를 가져오는데 그 정보를 response라고 부를 것이고 그 곳의 json을 가져와 date라고 부를 것인데 그 date 중에 name과 weather 배열의 0번째 객체 중 main에 해당 하는 정보를 변수에 담아줌.

</aside>

![Untitled](images/JavaScript/Untitled%2035.png)

대충 div와 span을 만들고 div에 id를 부여해줌.

![Untitled](images/JavaScript/Untitled%2036.png)

그리고 아까 fetch에서 가져온 데이터를 첫번재 span과 마지막 span의 innerText로 넣어준다.

![Untitled](images/JavaScript/Untitled%2037.png)

이런식으로 원하는 정보를 가져와 text로 넣어주면

(data가 아니라 date인데 오타났다.)

![Untitled](images/JavaScript/Untitled%2038.png)

이렇게 잘 나온다.