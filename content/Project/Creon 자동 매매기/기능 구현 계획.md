___

#### 주제
#주식 

#### 내용

### 개요

거래량 급증 종목을 확인 후 내가 직접 매매 전략을 짜준다.
매매기는 이를 읽고 가격만 확인하여 해당 가격에 도달 했을 시 지정된 행동을 하게 만든다.
자동으로 완벽한 전략을 구현하는 것이 불가능하다고 느낌.

>전략은 우선 [[농사 매매]], [[눌림목 매매]] 두 가지만을 사용하자.

---
### 매매 흐름

종목 당 총 투자금은 100만원
30, 30, 40 으로 최대 3차 매수 까지

**계좌 별 셋팅**

- 종목 별 최대 투자금
- 최대 보유 종목 수

**종목 별 셋팅**

- 최초 매수 가격 int
- 최초 매수 비율 int
- 익절 가격 (리스트의 길이 만큼 보유 주식 수를 나누어 판매, 길이가 1일 시 전부 판매) int[]
- 손절 가격 (손절가 상향 옵션 1의 경우 미설정 가능) int
- 1차 익절 후 손절가 상향(기본값 본절) int
- 추가 매수 가격(손절 가격 이상으로 설정되게, 1차 익절 시 확인하지 않음) int[]
- 추가 매수 비율 (추가 매수 가격과 동일한 길이로) int[]
- 익절 플래그 (별도의 값, 사용자 지정 x) enum(0, 1)

셋팅 값 검증 로직 구현

셋팅 값을 통해 종목 별 전략 객체를 만듦.

장 시작 시 최초 매수 가격으로 비율에 맞게 매수 주문
(매수 체결 후 보유 종목 수가 최대치에 도달 했을 시 남은 매수 주문을 전부 취소하는 로직 필요.)
전략 객체 변수로 매수 체결 flag 만들고 값을 1로 함.
(매수 시에는 항상 현재 예수금을 확인하는 절차 필요.)


이후 보유 중인 종목을 계속 감시.
- 익절 플래그(profit_flag) 0 일 때
	손절, 익절, 추가 매수 순서로 가격 확인
	
- 익절 플래그 1 일 때
	손절, 익절 순서로 가격 확인

익절 시
- 익절 가격 리스트의 길이가 1이라면
	잔량 전부 판매.
	최유리 매도
	전략 객체 제거
	
- 아닐 경우
	비율 맞춰 판매 후 left pop으로 0번째 가격 제거
	익절 플래그 1로 수정
	손절 가격 상향 조정
	

추가 매수 시
- 추가 매수 비율에 맞춰 매수 후 left pop으로 0번째 요소 제거
- 최유리 매수
- 급락 했을 때 연속적으로 추가 매수가 되는 것을 방지하기 위해 추가 매수 시에는 모든 회차의 추가 매수 가격을 확인 하고 해당하는 회차의 매수 가격과 비율로 매수를 진행한 뒤 indexing 하여 그 회차 및 앞의 요소들을 전부 제거한다.

손절 시
- 분할 매도 없음. 정해진 가격에 도달 시 시장가로 전부 판매

매매 종료 후
전략 객체의 매수 flag는 1이지만 마지막 보유 종목 확인 시에 리스트에 없다면 종목을 제거 함.
이후 전략 객체를 하나의 dict 형태로 만들고 json 파일로 저장 함.


---

**결론적으로**

프로그램은 creon API를 활용하여 종목들의 가격 확인, 매매, 알림 기능, 매매 후 기록.
이 4 가지 기능을 구현하면 된다.

여기서 시간이 남거나 더 고도화 하고 싶다면
여러 경제 지표를 장 시작 전, 장 종료 후에 내가 한눈에 확인할 수 있게 보여주는 기능과 그에 따른 매매 전략 수정 기능이 있겠다만 농사 매매랑 눌림목 매매는 사실 장세를 크게 다지 않는 전략들이다.

검색기에 조회된 종목 있을 시 슬렉 등으로 메세지를 보내주고
가격을 입력하면 바로 감시 전략에 반영될 수 있게 만들어보자.