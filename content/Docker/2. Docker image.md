지난 글에서 컨테이너는 한 어플리케이션이 작동하기 위한 모든 종속성을 포함한 독립적인 유닛이라고 했었다.

그렇다면 도커에서 이미지는 무엇을 말하는걸까?  

(아래 글을 읽고 오는 것을 추천 드립니다.)

[[1. Docker란(Docker를 쓰는 이유)]]

---

#### **목차**

1. **도커 이미지란**
2. **이미지 사용법**

---

#### **도커 이미지란**

도커로 작업하기 위해서는 일종의 **dissolver 역할**을 하는 **이미지**라는 것이 필요하다.

좀 더 쉽게 말하면 이미지는 컨테이너의 청사진(설계도) 역할을 한다.

  

개발자 관점으로 보자면 클래스와 인스턴스의 관계라고 생각하면 편하다.

이미지는 클래스고 컨테이너(객체)는 이미지(클래스)의 인스턴스다.

  

이미지에는 코드와 코드를 실행하는데 필요한 도구가 포함되어 있으며 컨테이너가 실행되어 이 코드를 실행한다.

하나의 이미지로 여러 컨테이너를 만들 수도 있으며 이미지는 공유도 가능한 패키지다.

  

---

#### **이미지 사용법**

컨테이너 실행에 필요한 이미지를 생성하고 가져오는 방법에는 두 가지가 있다.

---

1. **기존 이미지 사용**

  

매우 일반적인 공식 이미지 등 누군가 이미 만들어 놓은 이미지를 사용하는 방법이다. 이를 적극적으로 공유하는 커뮤니티가 바로 도커 허브(docker hub)다.

https://hub.docker.com/

일반적으로 위 사이트에서 필요한 이미지를 검색하여 사용한다.

  

![[images/Docker/1.png]]


예를들어 파이썬이 포함된 도커 이미지를 다운 받고 싶다면 위 처럼 python을 검색하는 것이다.

  
```bash
sudo apt-get install docker.io
# docker 설치 후
docker run python
```

위 명령어를 입력하면

  
![[images/Docker/2.png]]

위 사진 처럼 이미지가 없을 경우 알아서 설치 해준다음 컨테이너를 실행한다.

  

![[images/Docker/3.png]]

물론 공식 이미지에 있는 명령어 docker pull python을 입력한 뒤 docker run python을 해주어도 괜찮다.

설치가 완료되어도 컨테이너는 기본적으로 주변 환경과 격리되어 있기에 달라진 점이 눈으로 확인되지 않는다.

  
```bash
docker ps -a
# a는 all의 줄임말
```
위 명령어를 입력하면 도커가 생성한 모든 컨테이너, 모든 프로세스가 표시된다.

![[images/Docker/4.png]]

컨테이너의 ID, 사용한 이미지, 생성시간, 상태, 컨테이너 이름(현재 이름은 자동으로 생성된 이름이다.) 등 다양한 정보를 확인할 수 있다.
  
STATUS를 보면 6분전에 컨테이너 실행이 끝난(Exited) 것을 볼 수 있는데 이는 컨테이너가 격리되어 실행되기 때문이다.

컨테이너 외부에서는 많은 작업이 일어나고 있으나 단순 python 이미지를 사용한 컨테이너 내부에서는 컨테이너가 한번 실행 되는 것 외엔 별다른 작업이 없기 때문이다.

```bash
docker run -it python
```
위 명령어는 도커에게 컨테이너 내부에있는 대화형 세션을 로컬 머신으로 노출하고 싶다는 명령어다.

![[images/Docker/5.png]]

명령어 입력 시 위 처럼 python interpreter가 실행 되는데 이는 컨테이너 내부에 있는 python이다.

![[images/Docker/6.png]]
실제로 다른 세션으로 연결하여 python의 버전을 확인 해보면 3.11.4가 아닌 2.7.16이다.
  
![[images/Docker/7.png]]

그리고 다시 docker ps -a 명령어로 확인해보면 아까 실행 종료된 컨테이너와 (-it 옵션을 사용했기에) 아직 켜져있는 현재의 컨테이너를 확인할 수 있다.
  
그런데 도커를 사용하려는 사람 대부분이 단순히 python만을 포함한 컨테이너를 위해 도커를 사용하고 싶은 것은 아닐 것이다. 보통의 경우 이러한 이미지를 기반으로 코드를 추가하고 그 이미지로 코드를 실행하여 본인만의 이미지를 구축한다.
