아래 글을 읽어보고 오는 것을 추천드립니다.

[[6. 비잔틴 내결함성]]

---

기존에 설명했던 분산 원장, 불변 원장 개념에서는 네트워크 공격자가 전체 블록 중 중간 부분을 공격하는 상황을 가정하여 설명했었지만 이번엔 가장 마지막에 새롭게 생성될 블록을 조작된 블록으로 추가하려할 때를 가정하자.
  
또한 누군가 의도적으로 공격을 하는 것이 아닌 다음과 같은 상황에서도 합의 프로토콜이 필요하다.

대형 블록체인 같은 경우 체인은 가까운 노드 부터 점진적으로 퍼져나가기에 멀리 떨어진 노드 사이에서 지연이 발생할 수 있는데 이 지연되는 시간 동안 두 노드 모두 채굴에 성공했다면 어떤 블록을 사용할지 정해야한다.

  
만약 위 두가지 상황에서 합의 프로토콜이 없다면 서로 다른 블록이 생성된 두 체인이 충돌할 것이고 이후 체인은 2개, 4개, 8개로 계속 분할될 것이다.
  
이러한 합의 프로토콜에서 가장 보편적인 2가지 방법이 있는데 바로 작업 증명(PoW)과 지분 증명(PoS)이다.

우선 근본인 작업 증명에 대해서 먼저 알아보고자 한다. (작업 증명은 Satoshi Nakamoto가 비트코인에 적용한 방식이다.)

작업 증명에 대한 자세한 내용은 다음 글에 기재할 것이며 이번 글에서는 합의 포로토콜의 대략적인 개념만 이해하자.

---

블록이 추가되기 전에(네트워크로 전파되기 전에) 각 노드에서 일련의 확인을 하는데 이에 대한 공식 문서에 의하면 상당히 엄격한 과정을 통해(몇 페이지 분량이라고 함.) 모든 노드에 추가되는데 이를 모두 통과하지 않으면 블록은 기각된다. 

이러한 방식으로 첫번째 상황인 악의적인 블록 추가 행위를 방지하며 모든 규칙을 따랐을 때 비로소 토큰을 얻게 되는 것이다.

---

위 내용은 합의 포로토콜 자체에 대한 내용을 정리해놓은 것이고 합의 프로토콜 중 작업 증명에 대해서 알아보긴 했는데 비잔틴 내결함성과 크게 다른 점을 잘 모르겠다. 머리로도 어렴풋이 이해만 가기에 글로 정리할 수준은 아닌 것 같다.

추후에 좀 더 공부한 뒤에 다시 정리하는 시간을 갖던지 해야겠다.