# 🐻 BTC 하락장 전용 트레이딩 전략 백테스트 결과

## 📊 테스트 개요

### 테스트 기간 (하락장)
| 기간 | 시작가 | 종료가 | 하락폭 |
|------|--------|--------|--------|
| 2018년 (1월~12월) | $20,000 | $3,200 | **-84%** |
| 2022년 (1월~12월) | $47,000 | $16,500 | **-65%** |

### 테스트 설정
- **타임프레임**: 일봉 (1D)
- **초기 자본**: $10,000
- **리스크/거래**: 2%
- **최대 레버리지**: 5x
- **수수료**: 0.04% (테이커)

---

## 🏆 전략 순위 (2018 + 2022 합산)

| 순위 | 전략 | 총 수익률 | 평균 MDD | 승률 | 점수* |
|------|------|----------|----------|------|-------|
| **1** | Combined Bear | **16.9%** | 5.3% | 64.6% | 8.9 |
| **2** | Short Only Trend | **18.1%** | 6.6% | 57.7% | 8.2 |
| **3** | BB Breakdown Short | **10.2%** | 2.3% | **91.7%** | 6.8 |
| 4 | Momentum Reversal | 10.0% | 5.7% | 50.8% | 1.5 |
| 5 | RSI Overbought Short | 0.5% | 3.6% | 33.3% | -4.9 |
| 6 | MA Death Cross | -0.2% | 4.1% | 41.7% | -6.3 |
| 7 | Pullback Short | -1.2% | 5.4% | 56.2% | -9.3 |

*점수 = 수익률 - (MDD × 1.5)*

---

## 📈 연도별 상세 성과

### 🥇 1위: Combined Bear (복합 하락장 전략)
| 연도 | 거래수 | 승률 | 수익률 | MDD |
|------|--------|------|--------|-----|
| 2018 | 8 | 62.5% | +9.0% | 7.5% |
| 2022 | 6 | 66.7% | +8.0% | 3.2% |
| **합계** | 14 | **64.6%** | **+16.9%** | 5.3% |

### 🥈 2위: Short Only Trend (추세 추종 숏)
| 연도 | 거래수 | 승률 | 수익률 | MDD |
|------|--------|------|--------|-----|
| 2018 | 10 | 70.0% | +15.5% | 7.0% |
| 2022 | 11 | 45.5% | +2.5% | 6.1% |
| **합계** | 21 | **57.7%** | **+18.1%** | 6.6% |

### 🥉 3위: BB Breakdown Short (볼린저 밴드 이탈)
| 연도 | 거래수 | 승률 | 수익률 | MDD |
|------|--------|------|--------|-----|
| 2018 | 6 | 83.3% | +3.7% | 3.3% |
| 2022 | 4 | **100%** | +6.5% | 1.2% |
| **합계** | 10 | **91.7%** | **+10.2%** | 2.3% |

---

## 🔧 최적 파라미터

### Combined Bear (추천 전략)
```python
BEAR_STRATEGY_PARAMS = {
    # 지표 설정
    'sma_period': 50,           # 추세 판단 MA
    'rsi_period': 10,           # RSI 기간
    'rsi_overbought': 60,       # RSI 과매수 임계값
    'bb_period': 20,            # 볼린저 밴드 기간
    'adx_threshold': 25,        # ADX 추세 강도 임계값
    
    # 손익 설정
    'atr_period': 14,
    'atr_sl_mult': 1.5,         # ATR × 1.5 = 손절
    'atr_tp_mult': 4.0,         # ATR × 4.0 = 익절
    
    # 리스크 관리
    'leverage': 5,
    'risk_per_trade': 0.02      # 2%
}
```

**최적화 결과**:
- 2018: 수익률 **+8.7%**, MDD 4.8%
- 2022: 수익률 **+19.4%**, MDD 5.5%
- **합계: +28.1%**

---

## 📋 전략 설명

### 1. Combined Bear (복합 하락장 전략) ⭐추천
**진입 조건** (2개 이상 충족 시):
1. RSI > 60 (과매수 영역)
2. 10일 모멘텀 < -5% (강한 하락)
3. 가격 > BB 중간선 (반등 후)
4. ADX > 25 (강한 추세)
5. **기본 필터**: 가격 < SMA50 × 0.98 (하락 추세)

**청산**:
- 손절: 진입가 + ATR × 1.5
- 익절: 진입가 - ATR × 4.0

### 2. Short Only Trend (추세 추종)
**진입 조건**:
1. 가격 < SMA50 (하락 추세)
2. 14일 모멘텀 < -3%

**청산**:
- 손절: ATR × 2.0
- 익절: ATR × 3.0

### 3. BB Breakdown Short (볼린저 이탈)
**진입 조건**:
1. 가격 < BB 하단 (이탈)
2. 추세 강도 < -5% (SMA50 기준)

**청산**:
- 손절: BB 중간선
- 익절: ATR × 2.5

---

## ⚠️ 공격적 전략 테스트 결과

**결론: 비추천**

| 레버리지 | 리스크 | 수익률 | MDD |
|----------|--------|--------|-----|
| 5x | 2% | -86.4% | 48.3% |
| 10x | 3% | -113.2% | 62.1% |
| 15x | 5% | -148.3% | 79.0% |

> 고레버리지 + 빈번한 거래 = 오버트레이딩 → 손실

---

## 🤖 실행 가능한 봇 코드

### `bear_market_bot.py` (별도 파일)
기존 `multi_strategy_bot.py`와 통합 가능한 하락장 전용 모듈.

### 사용법
```bash
# 백테스트 실행
python3 bear_market_backtest.py

# 최적화 실행
python3 bear_market_backtest.py optimize
```

---

## 📝 핵심 교훈

1. **하락장에서도 숏은 쉽지 않다**
   - 반등(데드캣 바운스)에 손절 당할 수 있음
   - 보수적 접근 필수

2. **고승률 > 고수익률**
   - BB Breakdown: 91.7% 승률, 10.2% 수익
   - 안정적 수익이 장기적으로 유리

3. **과도한 레버리지 = 파산**
   - 5x까지가 안전 마진
   - 10x 이상은 하락장에서도 위험

4. **복합 신호 > 단일 신호**
   - 여러 지표 확인 후 진입
   - 거래 횟수 ↓, 승률 ↑

---

## 🔄 기존 봇 수정안

`multi_strategy_bot.py`에 하락장 모드 추가:

```python
def detect_market_regime(data, sma_period=100):
    """시장 상태 감지"""
    sma = sum(d['close'] for d in data[-sma_period:]) / sma_period
    current = data[-1]['close']
    
    pct_from_sma = (current - sma) / sma * 100
    
    if pct_from_sma > 10:
        return 'BULL'
    elif pct_from_sma < -10:
        return 'BEAR'
    else:
        return 'NEUTRAL'

# 봇 메인 루프에서:
regime = detect_market_regime(data)

if regime == 'BULL':
    # 기존 롱 전략
    run_long_strategies()
elif regime == 'BEAR':
    # 하락장 숏 전략
    run_bear_strategies()
else:
    # 관망 또는 레인지 전략
    pass
```

---

## 📁 관련 파일

| 파일 | 설명 |
|------|------|
| `bear_market_backtest.py` | 하락장 백테스트 메인 코드 |
| `bear_market_aggressive.py` | 공격적 전략 테스트 |
| `bear_market_results.json` | 백테스트 결과 JSON |
| `bear_aggressive_results.json` | 공격적 전략 결과 |

---

*마지막 업데이트: 2025-02-05*
*백테스트 기간: 2018, 2022 (하락장)*
